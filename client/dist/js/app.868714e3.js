(function(t){function e(e){for(var s,o,i=e[0],c=e[1],u=e[2],d=0,m=[];d<i.length;d++)o=i[d],Object.prototype.hasOwnProperty.call(n,o)&&n[o]&&m.push(n[o][0]),n[o]=0;for(s in c)Object.prototype.hasOwnProperty.call(c,s)&&(t[s]=c[s]);l&&l(e);while(m.length)m.shift()();return a.push.apply(a,u||[]),r()}function r(){for(var t,e=0;e<a.length;e++){for(var r=a[e],s=!0,i=1;i<r.length;i++){var c=r[i];0!==n[c]&&(s=!1)}s&&(a.splice(e--,1),t=o(o.s=r[0]))}return t}var s={},n={app:0},a=[];function o(e){if(s[e])return s[e].exports;var r=s[e]={i:e,l:!1,exports:{}};return t[e].call(r.exports,r,r.exports,o),r.l=!0,r.exports}o.m=t,o.c=s,o.d=function(t,e,r){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(o.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)o.d(r,s,function(e){return t[e]}.bind(null,s));return r},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],c=i.push.bind(i);i.push=e,i=i.slice();for(var u=0;u<i.length;u++)e(i[u]);var l=c;a.push([0,"chunk-vendors"]),r()})({0:function(t,e,r){t.exports=r("56d7")},"0e6c":function(t,e,r){t.exports=r.p+"img/default.8765c383.png"},"14b2":function(t,e,r){"use strict";var s=r("83d4"),n=r.n(s);n.a},2344:function(t,e,r){"use strict";var s=r("f96d"),n=r.n(s);n.a},"27e9":function(t,e,r){"use strict";var s=r("f731"),n=r.n(s);n.a},3482:function(t,e,r){},"34d3":function(t,e,r){},"39fd":function(t,e,r){"use strict";var s=r("4da3"),n=r.n(s);n.a},"40b2":function(t,e,r){"use strict";var s=r("c203"),n=r.n(s);n.a},"433f":function(t,e,r){"use strict";var s=r("3482"),n=r.n(s);n.a},4678:function(t,e,r){var s={"./af":"2bfb","./af.js":"2bfb","./ar":"8e73","./ar-dz":"a356","./ar-dz.js":"a356","./ar-kw":"423e","./ar-kw.js":"423e","./ar-ly":"1cfd","./ar-ly.js":"1cfd","./ar-ma":"0a84","./ar-ma.js":"0a84","./ar-sa":"8230","./ar-sa.js":"8230","./ar-tn":"6d83","./ar-tn.js":"6d83","./ar.js":"8e73","./az":"485c","./az.js":"485c","./be":"1fc1","./be.js":"1fc1","./bg":"84aa","./bg.js":"84aa","./bm":"a7fa","./bm.js":"a7fa","./bn":"9043","./bn.js":"9043","./bo":"d26a","./bo.js":"d26a","./br":"6887","./br.js":"6887","./bs":"2554","./bs.js":"2554","./ca":"d716","./ca.js":"d716","./cs":"3c0d","./cs.js":"3c0d","./cv":"03ec","./cv.js":"03ec","./cy":"9797","./cy.js":"9797","./da":"0f14","./da.js":"0f14","./de":"b469","./de-at":"b3eb","./de-at.js":"b3eb","./de-ch":"bb71","./de-ch.js":"bb71","./de.js":"b469","./dv":"598a","./dv.js":"598a","./el":"8d47","./el.js":"8d47","./en-SG":"cdab","./en-SG.js":"cdab","./en-au":"0e6b","./en-au.js":"0e6b","./en-ca":"3886","./en-ca.js":"3886","./en-gb":"39a6","./en-gb.js":"39a6","./en-ie":"e1d3","./en-ie.js":"e1d3","./en-il":"7333","./en-il.js":"7333","./en-nz":"6f50","./en-nz.js":"6f50","./eo":"65db","./eo.js":"65db","./es":"898b","./es-do":"0a3c","./es-do.js":"0a3c","./es-us":"55c9","./es-us.js":"55c9","./es.js":"898b","./et":"ec18","./et.js":"ec18","./eu":"0ff2","./eu.js":"0ff2","./fa":"8df4","./fa.js":"8df4","./fi":"81e9","./fi.js":"81e9","./fo":"0721","./fo.js":"0721","./fr":"9f26","./fr-ca":"d9f8","./fr-ca.js":"d9f8","./fr-ch":"0e49","./fr-ch.js":"0e49","./fr.js":"9f26","./fy":"7118","./fy.js":"7118","./ga":"5120","./ga.js":"5120","./gd":"f6b4","./gd.js":"f6b4","./gl":"8840","./gl.js":"8840","./gom-latn":"0caa","./gom-latn.js":"0caa","./gu":"e0c5","./gu.js":"e0c5","./he":"c7aa","./he.js":"c7aa","./hi":"dc4d","./hi.js":"dc4d","./hr":"4ba9","./hr.js":"4ba9","./hu":"5b14","./hu.js":"5b14","./hy-am":"d6b6","./hy-am.js":"d6b6","./id":"5038","./id.js":"5038","./is":"0558","./is.js":"0558","./it":"6e98","./it-ch":"6f12","./it-ch.js":"6f12","./it.js":"6e98","./ja":"079e","./ja.js":"079e","./jv":"b540","./jv.js":"b540","./ka":"201b","./ka.js":"201b","./kk":"6d79","./kk.js":"6d79","./km":"e81d","./km.js":"e81d","./kn":"3e92","./kn.js":"3e92","./ko":"22f8","./ko.js":"22f8","./ku":"2421","./ku.js":"2421","./ky":"9609","./ky.js":"9609","./lb":"440c","./lb.js":"440c","./lo":"b29d","./lo.js":"b29d","./lt":"26f9","./lt.js":"26f9","./lv":"b97c","./lv.js":"b97c","./me":"293c","./me.js":"293c","./mi":"688b","./mi.js":"688b","./mk":"6909","./mk.js":"6909","./ml":"02fb","./ml.js":"02fb","./mn":"958b","./mn.js":"958b","./mr":"39bd","./mr.js":"39bd","./ms":"ebe4","./ms-my":"6403","./ms-my.js":"6403","./ms.js":"ebe4","./mt":"1b45","./mt.js":"1b45","./my":"8689","./my.js":"8689","./nb":"6ce3","./nb.js":"6ce3","./ne":"3a39","./ne.js":"3a39","./nl":"facd","./nl-be":"db29","./nl-be.js":"db29","./nl.js":"facd","./nn":"b84c","./nn.js":"b84c","./pa-in":"f3ff","./pa-in.js":"f3ff","./pl":"8d57","./pl.js":"8d57","./pt":"f260","./pt-br":"d2d4","./pt-br.js":"d2d4","./pt.js":"f260","./ro":"972c","./ro.js":"972c","./ru":"957c","./ru.js":"957c","./sd":"6784","./sd.js":"6784","./se":"ffff","./se.js":"ffff","./si":"eda5","./si.js":"eda5","./sk":"7be6","./sk.js":"7be6","./sl":"8155","./sl.js":"8155","./sq":"c8f3","./sq.js":"c8f3","./sr":"cf1e","./sr-cyrl":"13e9","./sr-cyrl.js":"13e9","./sr.js":"cf1e","./ss":"52bd","./ss.js":"52bd","./sv":"5fbd","./sv.js":"5fbd","./sw":"74dc","./sw.js":"74dc","./ta":"3de5","./ta.js":"3de5","./te":"5cbb","./te.js":"5cbb","./tet":"576c","./tet.js":"576c","./tg":"3b1b","./tg.js":"3b1b","./th":"10e8","./th.js":"10e8","./tl-ph":"0f38","./tl-ph.js":"0f38","./tlh":"cf75","./tlh.js":"cf75","./tr":"0e81","./tr.js":"0e81","./tzl":"cf51","./tzl.js":"cf51","./tzm":"c109","./tzm-latn":"b53d","./tzm-latn.js":"b53d","./tzm.js":"c109","./ug-cn":"6117","./ug-cn.js":"6117","./uk":"ada2","./uk.js":"ada2","./ur":"5294","./ur.js":"5294","./uz":"2e8c","./uz-latn":"010e","./uz-latn.js":"010e","./uz.js":"2e8c","./vi":"2921","./vi.js":"2921","./x-pseudo":"fd7e","./x-pseudo.js":"fd7e","./yo":"7f33","./yo.js":"7f33","./zh-cn":"5c3a","./zh-cn.js":"5c3a","./zh-hk":"49ab","./zh-hk.js":"49ab","./zh-tw":"90ea","./zh-tw.js":"90ea"};function n(t){var e=a(t);return r(e)}function a(t){if(!r.o(s,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return s[t]}n.keys=function(){return Object.keys(s)},n.resolve=a,t.exports=n,n.id="4678"},"4da3":function(t,e,r){},5452:function(t,e,r){"use strict";var s=r("af35"),n=r.n(s);n.a},"56d7":function(t,e,r){"use strict";r.r(e);r("e260"),r("e6cf"),r("cca6"),r("a79d");var s=r("2b0e"),n=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{attrs:{id:"main"}},[r("Header"),r("div",{staticClass:"container"},[r("div",{staticClass:"spiner"},[t.loading?r("Spiner"):t._e()],1),r("div",{staticClass:"div"},[r("b-alert",{attrs:{show:!!t.getError,dismissible:"",variant:"warning"}},[t._v(t._s(t.getError)+" ")]),r("b-alert",{attrs:{show:!!t.getSuccess,dismissible:"",variant:"success"}},[t._v(t._s(t.getSuccess)+" ")])],1),r("router-view")],1)],1)},a=[],o=(r("96cf"),r("1da1")),i=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("nav",{staticClass:"navbar navbar-icon-top navbar-expand-lg navbar-dark bg-dark"},[r("div",{staticClass:"container"},[r("a",{staticClass:"navbar-brand",attrs:{href:"/"}},[t._v("EmptyGram")]),t._m(0),r("div",{staticClass:"collapse navbar-collapse",attrs:{id:"navbarSupportedContent"}},[r("ul",{staticClass:"navbar-nav mr-auto"},[t.islogin?[r("li",{staticClass:"nav-item"},[r("router-link",{staticClass:"nav-link",attrs:{to:"/allposts"}},[r("i",{staticClass:"fa fa-globe"}),t._v(" All Posts ")])],1),r("li",{staticClass:"nav-item"}),r("li",{staticClass:"nav-item"},[r("router-link",{staticClass:"nav-link",attrs:{to:"/admin"}},[r("i",{staticClass:"fa fa-rss"}),t._v(" Add post ")])],1)]:t._e()],2),r("ul",{staticClass:"navbar-nav"},[t.islogin?[r("li",{staticClass:"nav-item dropdown"},[r("b-nav-item-dropdown",{attrs:{text:this.$store.getters.getUser.name,right:""}},[r("b-dropdown-item",{attrs:{to:"/user"}},[t._v("Account")]),r("b-dropdown-item",{on:{click:t.logout}},[t._v("logout")])],1)],1)]:t._e(),t.islogin?t._e():[r("li",{staticClass:"nav-item"},[r("router-link",{staticClass:"nav-link",attrs:{to:"/login"}},[r("i",{staticClass:"fa fa-sign-in"}),t._v(" Log In ")])],1),r("li",{staticClass:"nav-item"},[r("router-link",{staticClass:"nav-link",attrs:{to:"/registration"}},[r("i",{staticClass:"fa fa-user-plus"}),t._v(" Register ")])],1)]],2)])])])},c=[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("button",{staticClass:"navbar-toggler",attrs:{type:"button","data-toggle":"collapse","data-target":"#navbarSupportedContent","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"Toggle navigation"}},[r("span",{staticClass:"navbar-toggler-icon"})])}],u={computed:{getUser:function(){return this.$store.getters.getUser},getError:function(){return this.$store.getters.error},islogin:function(){return this.$store.getters.getUser}},methods:{logout:function(t){var e=this;this.$store.dispatch("logout").then((function(){e.$router.push("/")})).catch()}}},l=u,d=(r("5452"),r("2877")),m=Object(d["a"])(l,i,c,!1,null,null,null),f=m.exports,p=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"text-center"},[r("b-spinner",{attrs:{variant:"primary",label:"Text Centered"}})],1)},v=[],g={},b=Object(d["a"])(g,p,v,!1,null,null,null),h=b.exports,j={data:function(){return{drawer:!1,dismissSecs:10,dismissCountDown:0,showDismissibleAlert:!1}},components:{Header:f,Spiner:h},methods:{countDownChanged:function(t){this.dismissCountDown=t},showAlert:function(){this.dismissCountDown=this.dismissSecs}},computed:{getError:function(){return this.$store.getters.error},getSuccess:function(){return this.$store.getters.success},loading:function(){return this.$store.getters.loading}},beforeCreate:function(){return Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)})))()}},_=j,w=(r("5c0b"),Object(d["a"])(_,n,a,!1,null,null,null)),C=w.exports,x=r("2b27"),k=r.n(x),y=r("5f5b"),E=r("b1e0"),P=r("8c4f"),$=r("2f62"),L=(r("99af"),r("4de4"),r("7db0"),r("c740"),r("a434"),r("2909")),O=r("bc3a"),S=r.n(O),R=S.a.create({baseURL:"/",withCredentials:!0,headers:{"Content-Type":"application/json"}}),z=R,D={state:{posts:[],post:null,totalCount:0,activePage:1},actions:{fetchPosts:function(t,e){var r=t.commit;t.getters,t.dispatch;return Object(o["a"])(regeneratorRuntime.mark((function t(){var s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r("clearError"),r("setLoading",!0),t.prev=2,t.next=5,z.get("/posts",{params:e});case 5:s=t.sent,r("setLoading",!1),r("updatePosts",s),t.next=15;break;case 10:throw t.prev=10,t.t0=t["catch"](2),r("setLoading",!1),r("setError",t.t0.response.data),t.t0;case 15:case"end":return t.stop()}}),t,null,[[2,10]])})))()},addPost:function(t,e){var r=t.commit;t.dispatch;return Object(o["a"])(regeneratorRuntime.mark((function t(){var s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r("clearError"),r("setLoading",!0),t.prev=2,t.next=5,z.post("/posts",e);case 5:s=t.sent,r("setLoading",!1),r("updatePosts",s),t.next=15;break;case 10:throw t.prev=10,t.t0=t["catch"](2),r("setLoading",!1),r("setError",t.t0.response.data),t.t0;case 15:case"end":return t.stop()}}),t,null,[[2,10]])})))()},deletePost:function(t,e){var r=t.commit,s=(t.dispatch,t.getters);return Object(o["a"])(regeneratorRuntime.mark((function t(){var n,a,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r("clearError"),r("setLoading",!0),n=s.getUser.email,a=s.onePostbyId(e).user.email,n!==a){t.next=23;break}return r("clearError"),r("setLoading",!0),t.prev=7,t.next=10,z.delete("/posts/".concat(e));case 10:o=t.sent,r("setLoading",!1),r("setSuccess",o.data.success),r("deletePost",e),t.next=21;break;case 16:throw t.prev=16,t.t0=t["catch"](7),r("setLoading",!1),r("setError",t.t0.response.data.error),t.t0;case 21:t.next=25;break;case 23:r("setError","это не ваш пост"),r("setLoading",!1);case 25:case"end":return t.stop()}}),t,null,[[7,16]])})))()},getPost:function(t,e){var r=t.commit,s=t.dispatch;return Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r("clearError"),r("setLoading",!0),t.prev=2,t.next=5,z.get("/posts/".concat(e));case 5:t.sent,r("setLoading",!1),s("fetchPosts"),t.next=15;break;case 10:throw t.prev=10,t.t0=t["catch"](2),r("setLoading",!1),r("setError",t.t0.response.data),t.t0;case 15:case"end":return t.stop()}}),t,null,[[2,10]])})))()},deleteComments:function(t,e){var r=t.commit,s=(t.dispatch,t.getters),n=e.postId,a=e.commentId;return Object(o["a"])(regeneratorRuntime.mark((function t(){var e,o,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(console.log(n,a),r("clearError"),r("setLoading",!0),e=s.getUser.email,o=s.onePostbyId(n).user.email,e!==o){t.next=24;break}return r("clearError"),r("setLoading",!0),t.prev=8,t.next=11,z.delete("/posts/".concat(n,"/comments/").concat(a));case 11:i=t.sent,r("setLoading",!1),r("setSuccess","Удалено"),r("addComment",{id:n,comments:i.data.posts.comments}),t.next=22;break;case 17:throw t.prev=17,t.t0=t["catch"](8),r("setLoading",!1),r("setError","Ошибка"),t.t0;case 22:t.next=26;break;case 24:r("setError","это не ваш пост"),r("setLoading",!1);case 26:case"end":return t.stop()}}),t,null,[[8,17]])})))()},addComment:function(t,e){var r=t.commit,s=(t.dispatch,e.id),n=e.comment;return Object(o["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r("clearError"),r("setLoading",!0),r("clearError"),r("setLoading",!0),t.prev=4,t.next=7,z.post("/posts/".concat(s,"/comments"),{comment:n});case 7:e=t.sent,r("setLoading",!1),r("addComment",{id:s,comments:e.data.comments}),console.log(e),t.next=19;break;case 13:throw t.prev=13,t.t0=t["catch"](4),console.log(t.t0),r("setLoading",!1),t.t0.response&&r("setError",t.t0.response.data.error),t.t0;case 19:case"end":return t.stop()}}),t,null,[[4,13]])})))()}},mutations:{updatePosts:function(t,e){t.posts=e.data.posts,t.totalCount=+e.headers["x-total-count"]},createPost:function(t,e){t.posts.unshift(e)},deletePost:function(t,e){var r=t.posts.findIndex((function(t){return t._id===e}));t.posts.splice(r,1)},addComment:function(t,e){var r=e.id,s=e.comments,n=t.posts.findIndex((function(t){return t._id===r}));t.posts[n].comments=Object(L["a"])(s)}},getters:{validPosts:function(t){return t.posts.filter((function(t){return t.title&&t.body}))},allPosts:function(t){return t.posts},getComments:function(t){return function(e){return t.posts.find((function(t){return t._id===e})).comments}},onePostbyId:function(t){return function(e){return t.posts.find((function(t){return t._id===e}))}},totalCount:function(t,e){return t.totalCount}}},U={state:{user:null},actions:{getUserData:function(t){var e=t.commit;t.getters,t.dispatch;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e("clearError"),e("setLoading",!0),t.prev=2,t.next=5,z.post("/user");case 5:r=t.sent,e("setLoading",!1),e("updateStatus",r.data.user),t.next=15;break;case 10:throw t.prev=10,t.t0=t["catch"](2),e("setLoading",!1),e("setError",t.t0.response.data),t.t0;case 15:case"end":return t.stop()}}),t,null,[[2,10]])})))()},login:function(t,e){var r=t.commit;return Object(o["a"])(regeneratorRuntime.mark((function t(){var s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r("clearError"),r("setLoading",!0),t.prev=2,t.next=5,z.post("/login",e);case 5:s=t.sent,r("setLoading",!1),r("updateStatus",s.data.user),t.next=15;break;case 10:throw t.prev=10,t.t0=t["catch"](2),r("setLoading",!1),r("setError",t.t0.response.data.error),t.t0;case 15:case"end":return t.stop()}}),t,null,[[2,10]])})))()},registration:function(t,e){var r=t.commit;return Object(o["a"])(regeneratorRuntime.mark((function t(){var s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r("clearError"),r("setLoading",!0),t.prev=2,t.next=5,z.post("/register",e);case 5:s=t.sent,r("updateStatus",s.data.user),r("setLoading",!1),t.next=15;break;case 10:throw t.prev=10,t.t0=t["catch"](2),r("setLoading",!1),r("setError",t.t0.response.data.error),t.t0;case 15:case"end":return t.stop()}}),t,null,[[2,10]])})))()},logout:function(t){var e=t.commit;t.dispatch;return Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e("clearError"),e("setLoading",!0),t.prev=2,t.next=5,z.get("/logout");case 5:e("updateStatus",null),e("setLoading",!1),t.next=15;break;case 9:throw t.prev=9,t.t0=t["catch"](2),console.log(t.t0),e("setLoading",!1),e("setError",t.t0),t.t0;case 15:case"end":return t.stop()}}),t,null,[[2,9]])})))()}},mutations:{updateStatus:function(t,e){t.user=e}},getters:{getUser:function(t){return t.user}}},A={state:{loading:!1,error:null,success:null},mutations:{setLoading:function(t,e){t.loading=e},setError:function(t,e){t.error=e},setSuccess:function(t,e){t.success=e},clearSuccess:function(t){t.error=null},clearError:function(t){t.error=null}},actions:{setLoading:function(t,e){var r=t.commit;r("setLoading",e)},setError:function(t,e){var r=t.commit;r("setError",e)},setSuccess:function(t,e){var r=t.commit;r("setSuccess",e)},clearError:function(t){var e=t.commit;e("clearError")},clearSuccess:function(t){var e=t.commit;e("clearSuccess")}},getters:{loading:function(t){return t.loading},error:function(t){return t.error},success:function(t){return t.success}}};s["default"].use($["a"]);var I=new $["a"].Store({actions:{},mutations:{},state:{},getters:{},modules:{post:D,auth:U,shared:A}}),T=function(t,e,r){return N.apply(this,arguments)};function N(){return N=Object(o["a"])(regeneratorRuntime.mark((function t(e,r,s){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:I.getters.getUser?s():s("/login?loginError=true");case 1:case"end":return t.stop()}}),t)}))),N.apply(this,arguments)}var q=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},M=[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"container"},[r("h1",{staticClass:"title"},[t._v("Добро пожаловать!")])])}],F={data:function(){return{}}},H=F,B=(r("27e9"),Object(d["a"])(H,q,M,!1,null,"3f4c8044",null)),G=B.exports,J=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"container"},[r("h1",{staticClass:"title"},[t._v("Посты")]),r("Posts")],1)},K=[],V=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"posts"},[t._l(t.allPosts,(function(e){return r("router-link",{key:e._id,staticClass:"post",attrs:{to:"/post/"+e._id,tag:"div"}},[r("div",{staticClass:"flex"},[r("span",[t._v("Aвтор:")]),e.user&&e.user.name?r("h5",[t._v(t._s(e.user.name))]):r("h5",[t._v("пользователь был удален")])]),r("h2",[t._v(t._s(e.title))]),r("p",{staticClass:"post__desc",domProps:{innerHTML:t._s(t.$options.filters.transformHtml(e.content))}})])})),r("paginate",{attrs:{"page-count":t.page,"page-range":3,"margin-pages":2,"click-handler":t.onPageChange,"prev-text":"Prev","next-text":"Next","container-class":"pagination","page-class":"page-item"}})],2)},Q=[],W=r("8832"),X=r.n(W),Y=3,Z={data:function(){return{activePage:1}},components:{Paginate:X.a},filters:{transformHtml:function(t){for(var e="",r=0;r<100;r++)t[r]&&(e+=t[r]);return e[e.length-1],e+"..."}},computed:{allPosts:function(){return this.$store.getters.allPosts},page:function(){return Math.round(this.$store.getters.totalCount/Y+1)}},methods:{onPageChange:function(t){this.$store.dispatch("fetchPosts",{skip:(t-1)*Y,limit:Y})}},created:function(){this.$store.dispatch("fetchPosts",{skip:0,limit:Y})}},tt=Z,et=(r("f12a"),Object(d["a"])(tt,V,Q,!1,null,null,null)),rt=et.exports,st={data:function(){return{}},components:{Posts:rt}},nt=st,at=(r("2344"),Object(d["a"])(nt,J,K,!1,null,"7b9ca28e",null)),ot=at.exports,it=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("b-jumbotron",{attrs:{header:t.getUser.name}},[r("p",[t._v("Email: "+t._s(t.getUser.email))]),r("img",{staticClass:"avatar",attrs:{src:"http://127.0.0.1:3000/"+t.getUser.avatar}}),r("br"),r("br"),r("b-button",{attrs:{variant:"primary",href:"#"}},[t._v("More Info")])],1),r("p",[t._v("Загрузить аватарку")]),r("form",{attrs:{enctype:"multipart/form-data"},on:{submit:function(e){return e.preventDefault(),t.onSubmit(e)}}},[r("input",{attrs:{type:"file"},on:{change:function(e){return t.processFile(e)}}}),r("b-button",{attrs:{type:"submit",variant:"primary"}},[t._v("Submit")])],1)],1)},ct=[],ut={headers:{"Content-Type":"multipart/form-data;boundary=----WebKitFormBoundaryyrV7KO0BoCBuDbTL"}},lt={data:function(){return{user:"",file:null}},computed:{getUser:function(){return this.$store.getters.getUser}},methods:{processFile:function(){this.file=event.target.files[0]},onSubmit:function(){var t=new FormData;t.append("file",this.file),console.log(this.file),this.file&&z.post("/avatar",t,ut).then((function(t){return console.log(t)})).catch((function(t){return console.log(t)}))}}},dt=lt,mt=(r("40b2"),Object(d["a"])(dt,it,ct,!1,null,null,null)),ft=mt.exports,pt=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"container",on:{click:t.clearFields}},[r("form",{staticClass:"form",on:{submit:function(e){return e.preventDefault(),t.login(e)}}},[r("h2",{staticClass:"form__title"},[t._v("Login")]),r("p",{staticClass:"error-my",attrs:{"v-model":t.errors.error}},[t._v(t._s(t.errors.error))]),r("p",{staticClass:"error-my",attrs:{"v-model":t.errors.email}},[t._v(t._s(t.errors.email))]),r("p",[t._v("E-mail")]),r("input",{directives:[{name:"model",rawName:"v-model",value:t.form.email,expression:"form.email"}],attrs:{type:"text",name:"email"},domProps:{value:t.form.email},on:{blur:function(e){return t.$v.form.email.$touch()},input:function(e){e.target.composing||t.$set(t.form,"email",e.target.value)}}}),r("p",{staticClass:"error-my",attrs:{"v-model":t.errors.password}},[t._v(t._s(t.errors.password))]),r("p",[t._v("Password")]),r("input",{directives:[{name:"model",rawName:"v-model",value:t.form.password,expression:"form.password"}],attrs:{type:"password",name:"password"},domProps:{value:t.form.password},on:{input:function(e){e.target.composing||t.$set(t.form,"password",e.target.value)}}}),r("button",{staticClass:"form__btn",attrs:{type:"submit",disabled:t.$v.$invalid||t.loading}},[t._v("submit")])])])},vt=[],gt=r("b5ae"),bt={data:function(){return{form:{password:"",email:""},errors:{password:"",email:"",error:""}}},validations:{form:{email:{required:gt["required"],email:gt["email"],uniqEmail:function(t){return!0}}}},methods:{login:function(){var t=this,e={email:this.form.email,password:this.form.password};this.$store.dispatch("login",e).then((function(){return t.$router.push("/")})).catch((function(){}))},clearFields:function(){this.errors.password="",this.errors.email="",this.errors.error=""}},mounted:function(){},computed:{loading:function(){return this.$store.getters.loading}},created:function(){this.$route.query["loginError"]&&this.$store.dispatch("setError","Please log in to access this page ...")}},ht=bt,jt=(r("433f"),Object(d["a"])(ht,pt,vt,!1,null,"19fcac4b",null)),_t=jt.exports,wt=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"container"},[r("h1",[t._v("Добавить пост")]),r("AddPosts")],1)},Ct=[],xt=(r("fb6a"),r("d3b7"),r("25f0"),function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"data-1r12r"},[r("label",{staticClass:"wrapper-post"},[r("h2",{staticClass:"title-post"},[t._v("Заголовок поста:")]),r("b-form-input",{attrs:{type:"text",name:"title",placeholder:""},model:{value:t.title,callback:function(e){t.title=e},expression:"title"}})],1),r("br"),r("h2",[t._v("Тело поста:")]),r("vue-editor",{staticClass:"editor",attrs:{theme:"show"},model:{value:t.content,callback:function(e){t.content=e},expression:"content"}}),r("b-button",{attrs:{variant:"dark"},on:{click:t.createPosts}},[t._v("submit")])],1)}),kt=[],yt=r("953d"),Et=r("5873"),Pt={data:function(){return{content:"<p>example content</p>",title:""}},components:{quillEditor:yt["quillEditor"],VueEditor:Et["a"]},methods:{createPosts:function(){var t=this,e={title:this.title,content:this.content};this.$store.dispatch("addPost",e).then((function(){t.title="",t.content=""}))}},computed:{editor:function(){return this.$refs.myQuillEditor.quill}},mounted:function(){}},$t=Pt,Lt=(r("a342"),Object(d["a"])($t,xt,kt,!1,null,null,null)),Ot=Lt.exports,St={name:"Login",data:function(){return{name:""}},components:{AddPosts:Ot},methods:{},created:function(){},filters:{upperCase:function(t){return t?(t=t.toString(),t.charAt(0).toUpperCase()+t.slice(1)):""}}},Rt=St,zt=Object(d["a"])(Rt,wt,Ct,!1,null,null,null),Dt=zt.exports,Ut=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"container"},[r("form",{staticClass:"form",on:{submit:function(e){return e.preventDefault(),t.registration(e)}}},[r("h2",{staticClass:"form__title"},[t._v("Registration")]),r("p",{attrs:{"v-model":t.error}},[t._v(t._s(t.error))]),r("p",[t._v("Name")]),r("input",{directives:[{name:"model",rawName:"v-model",value:t.name,expression:"name"}],attrs:{type:"text",name:"name"},domProps:{value:t.name},on:{input:function(e){e.target.composing||(t.name=e.target.value)}}}),r("p",[t._v("E-mail")]),r("input",{directives:[{name:"model",rawName:"v-model",value:t.email,expression:"email"}],attrs:{type:"text",name:"email"},domProps:{value:t.email},on:{input:function(e){e.target.composing||(t.email=e.target.value)}}}),r("p",[t._v("Password")]),r("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],attrs:{type:"password",name:"password"},domProps:{value:t.password},on:{input:function(e){e.target.composing||(t.password=e.target.value)}}}),r("p",[t._v("Secret key")]),r("input",{directives:[{name:"model",rawName:"v-model",value:t.secretkey,expression:"secretkey"}],attrs:{type:"text",name:"secretkey"},domProps:{value:t.secretkey},on:{input:function(e){e.target.composing||(t.secretkey=e.target.value)}}}),r("button",{attrs:{loading:t.loading,disabled:t.loading,type:"submit"}},[t._v("submit")])])])},At=[],It=(r("b0c0"),{data:function(){return{error:"",password:"",email:"",name:"",secretkey:""}},computed:{loading:function(){return this.$store.getters.loading}},methods:{registration:function(){var t=this,e={email:this.email,password:this.password,name:this.name,secretkey:this.secretkey};this.$store.dispatch("registration",e).then((function(){t.$router.push("/")})).catch((function(){}))}}}),Tt=It,Nt=(r("14b2"),Object(d["a"])(Tt,Ut,At,!1,null,"7aadd834",null)),qt=Nt.exports,Mt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"onepost"},[s("div",{staticClass:"flex"},[s("span",[t._v("Aвтор:")]),t.post.user?s("h5",[t._v(t._s(t.post.user.name))]):t._e()]),s("h2",{staticClass:"onepost__title"},[t._v(t._s(t.post.title))]),s("div",{staticClass:"onepost__body",domProps:{innerHTML:t._s(t.post.content)}}),s("time",[t._v(t._s(t._f("getDate")(t.post.createdDate)))]),t.getAuthorPost?s("button",{staticClass:"close post__delete",attrs:{type:"button","aria-label":"Close"},on:{click:function(e){return t.deletePost(t.post._id)}}},[t._v("×")]):t._e()]),s("div",{staticClass:"wrapper-comments"},t._l(t.getComments,(function(e){return s("div",{key:e._id,staticClass:"comments"},[e.user?s("div",{staticClass:"img-name"},[s("img",{staticClass:"com-avatar",attrs:{src:e.user.avatar,alt:""}})]):s("div",{staticClass:"img-name"},[s("img",{staticClass:"com-avatar",attrs:{src:r("0e6c"),alt:""}})]),s("p",{staticClass:"comment-body"},[t._v(t._s(e.body))]),s("div",{staticClass:"comments__data"},[t.getAuthorPost?s("button",{staticClass:"close post__delete",attrs:{type:"button","aria-label":"Close"},on:{click:function(r){return t.deleteComment(t.post._id,e._id)}}},[t._v("×")]):t._e(),t.post.user?s("p",[t._v("Автор: "+t._s(t.post.user.name))]):t._e(),s("time",[t._v(t._s(t._f("getDate")(t.post.createdDate)))])])])})),0),s("div",{staticClass:"card-footer"},[s("form",{staticClass:"form-comment",attrs:{action:""},on:{submit:function(e){return e.preventDefault(),t.addComment(e)}}},[s("b-form-textarea",{attrs:{id:"textarea",placeholder:"Здесь можно оставить комментарий...",rows:"3","max-rows":"6"},model:{value:t.comment,callback:function(e){t.comment=e},expression:"comment"}}),s("b-button",{staticClass:"btn-comment",attrs:{variant:"outline-primary",type:"submit"}},[t._v("Оставить комментарий")])],1)])])},Ft=[],Ht=r("c1df"),Bt=r.n(Ht),Gt={props:["id"],data:function(){return{comment:""}},filters:{getDate:function(t){var e=new Date(t);return Bt()(e).format("LL")}},computed:{post:function(){var t=this.id;return this.$store.getters.onePostbyId(t)},getComments:function(){return this.$store.getters.getComments(this.id)},getAuthorPost:function(){var t,e=this.$store.getters.getUser.email;return this.post.user&&(t=this.post.user.email),e===t}},methods:{addComment:function(t){this.$store.dispatch("addComment",{comment:this.comment,id:this.id})},deletePost:function(t){this.$store.dispatch("deletePost",t)},deleteComment:function(t,e){this.$store.dispatch("deleteComments",{postId:t,commentId:e})}}},Jt=Gt,Kt=(r("39fd"),Object(d["a"])(Jt,Mt,Ft,!1,null,null,null)),Vt=Kt.exports,Qt=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"container"})},Wt=[],Xt={data:function(){return{}}},Yt=Xt,Zt=Object(d["a"])(Yt,Qt,Wt,!1,null,null,null),te=Zt.exports;s["default"].use(P["a"]);var ee=new P["a"]({routes:[{path:"/",name:"home",component:G},{path:"/allposts",name:"Allposts",component:ot,beforeEnter:T},{path:"/post/:id",name:"post",component:Vt,props:!0,beforeEnter:T},{path:"/login",name:"Login",component:_t},{path:"/registration",name:"Registration",component:qt},{path:"/orders",name:"Orders",component:te},{path:"/admin",name:"Admin",component:Dt,beforeEnter:T},{path:"/user",name:"User",component:ft,beforeEnter:T}],mode:"history"});ee.beforeEach(function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(e,r,s){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,I.dispatch("getUserData");case 2:t.sent,s();case 4:case"end":return t.stop()}}),t)})));return function(e,r,s){return t.apply(this,arguments)}}());var re=ee,se=r("1dce"),ne=r.n(se),ae=(r("21b6"),r("2dd8"),r("a753"),r("8096"),r("14e1"),r("944d")),oe=r.n(ae);s["default"].use(y["a"]),s["default"].use(E["a"]),s["default"].config.productionTip=!1,s["default"].use(k.a),s["default"].use(ne.a),new s["default"]({store:I,router:re,style:oe.a,render:function(t){return t(C)}}).$mount("#app")},"59b0":function(t,e,r){},"5c0b":function(t,e,r){"use strict";var s=r("9c0c"),n=r.n(s);n.a},"83d4":function(t,e,r){},"944d":function(t,e,r){},"9c0c":function(t,e,r){},a342:function(t,e,r){"use strict";var s=r("34d3"),n=r.n(s);n.a},af35:function(t,e,r){},c203:function(t,e,r){},f12a:function(t,e,r){"use strict";var s=r("59b0"),n=r.n(s);n.a},f731:function(t,e,r){},f96d:function(t,e,r){}});
//# sourceMappingURL=app.868714e3.js.map